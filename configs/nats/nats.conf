# Jeffrey P2 - NATS Configuration Optimisée
server_name: jeffrey-nats-p2

# Ports
port: 4222
# HTTP monitoring (pas de doublon - Fix #7)
http: 0.0.0.0:8222

# JetStream Configuration
jetstream {
  store_dir: /data

  # Limites mémoire/disque (ajustées selon architecture)
  max_memory_store: 2GB
  max_file_store: 10GB

  # Options performance
  max_outstanding_catchup: 64MB
}

# Logging
debug: false
trace: false
logtime: true
log_file: "/data/nats.log"

# Limites de connexion (unités en octets - Fix #8)
max_connections: 1000
max_control_line: 4096
max_payload: 8388608
max_pending: 67108864

# Ping pour healthcheck
ping_interval: "30s"
ping_max: 3

# Write deadline
write_deadline: "10s"

# Cluster (future)
# cluster {
#   port: 6222
#   routes: []
# }
